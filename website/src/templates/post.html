<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>{{title}}</title>
    <link rel="stylesheet" href="../styles/main.css" />
    <link
      href="https://fonts.googleapis.com/css2?family=Lato:wght@400;700&family=Roboto+Mono&display=swap"
      rel="stylesheet"
    />
  </head>
  <body>
    <div class="container">
      <aside id="toc-sidebar">
        <!-- The TOC will be inserted here -->
      </aside>
      <div class="content-wrapper">
        <header class="post-header">
          <div class="post-meta">
            <time>{{date}}</time>
            <nav class="post-navigation">
              <div class="nav-all">
                <a href="../index.html" class="nav-link">All posts</a>
              </div>
              <div class="nav-previous">
                {{#if previousPost}}
                <a href="{{previousPost}}" class="nav-link">Previous</a>
                {{/if}}
              </div>
              <div class="nav-next">
                {{#if nextPost}}
                <a href="{{nextPost}}" class="nav-link">Next</a>
                {{/if}}
              </div>
            </nav>
          </div>
        </header>
        <main>
          <article>{{content}}</article>
        </main>
      </div>
    </div>
    <script>
      // JavaScript to highlight current section in TOC
      document.addEventListener("DOMContentLoaded", () => {
        const tocLinks = document.querySelectorAll("#toc-sidebar a");
        const headings = document.querySelectorAll("h1, h2, h3, h4, h5, h6");

        const observer = new IntersectionObserver(
          (entries) => {
            entries.forEach((entry) => {
              if (entry.isIntersecting) {
                tocLinks.forEach((link) => {
                  link.classList.remove("active");
                  if (link.getAttribute("href") === "#" + entry.target.id) {
                    link.classList.add("active");
                  }
                });
              }
            });
          },
          { rootMargin: "0px 0px -50% 0px" }
        );

        headings.forEach((heading) => observer.observe(heading));
      });
    </script>
  </body>
</html>
